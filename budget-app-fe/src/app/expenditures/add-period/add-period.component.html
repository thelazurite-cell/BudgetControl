<h1 mat-dialog-title>Add Period</h1>
<div mat-dialog-content>
  <form [formGroup]="periodForm">
    <div class="row">
      <div class="col-xs-12">
        <div class="box">
          <mat-form-field appearance="fill">
            <mat-label>Term</mat-label>
            <mat-select #termSelect formControlName="termId" (valueChange)="termSelected(termSelect.value)">
              <mat-option *ngFor="let item of getDropDownOptions('termId')" [value]="item.key">
                {{item.value.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </div>
    <ng-container *ngIf="periodForm.controls.termId.value">
    <div class="row">
      <div class="col-xs">
        <div class="box">
          <div class="row">
            <div class="col-xs-12">
              <mat-form-field appearance="fill">
                <mat-label>Starts From</mat-label>
                <input matInput [matDatepicker]="dp" formControlName="startsFrom" readonly="readonly">
                <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                <mat-datepicker #dp
                                startView="multi-year"
                                (yearSelected)="chosenYearHandler($event)"
                                (monthSelected)="chosenMonthHandler($event)">
                </mat-datepicker>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <mat-form-field appearance="fill">
          <mat-label>Ends on</mat-label>
          <input matInput [matDatepicker]="eo" formControlName="endsOn" readonly="readonly">
          <mat-datepicker-toggle matSuffix [for]="eo" disabled="disabled"></mat-datepicker-toggle>
          <mat-datepicker #eo
                          startView="multi-year">
          </mat-datepicker>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-6">
        <mat-form-field appearance="fill">
          <mat-label>Income</mat-label>
          <input label="Ends on" matInput formControlName="income" />
        </mat-form-field>
      </div>
      <div class="col-xs-6">
        <mat-form-field appearance="fill">
          <mat-label>Name</mat-label>
          <input label="Name" matInput formControlName="name"/>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <mat-form-field appearance="fill">
          <mat-label>Discrepancy Reason</mat-label>
          <input label="Discrepancy Reason" matInput formControlName="discrepancyReason"/>
        </mat-form-field>
      </div>
    </div>
    </ng-container>
  </form>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="abortAdd()">Cancel</button>
  <button [attr.disabled]="!periodForm.valid ? '' : null"
          [matTooltip]="!periodForm.valid ? 'Period data must be valid before submitting': null" mat-button (click)="addRecord()" cdkFocusInitial>Add</button>
</div>

