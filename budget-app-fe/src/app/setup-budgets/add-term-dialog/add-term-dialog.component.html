<h1 mat-dialog-title>Add Term</h1>
<div mat-dialog-content>
    <form [formGroup]="termForm">
      <h2>Term Settings</h2>
      <p>A term is used to state your income for a period. The periods can run over a length of time.</p>
      <div class="row">
        <div class="col-xs">
          <div class="box">
            <div class="row">
              <div class="col-xs-12">
                <div class="box">
                  <mat-form-field appearance="fill">
                    <mat-label>Name</mat-label>
                    <input label="Name" matInput formControlName="termName"/>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xs-6">
                <div class="box">
                  <mat-form-field appearance="fill">
                    <mat-label>Start Day</mat-label>
                    <input label="Start day" (change)="startDayChange($event)" matInput
                           formControlName="termStart"/>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xs-6">
                <div class="box">
                  <mat-form-field appearance="fill">
                    <mat-label>End Day</mat-label>
                    <input label="End day" appRegex="^[0-9]*$" matInput #endDay formControlName="termEnd"/>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xs-4">
                <mat-form-field appearance="fill">
                  <mat-label>Term Schedule Commences</mat-label>
                  <input label="Term Starts" matInput [matDatepicker]="termStarts"
                         formControlName="termCommenceDate"/>
                  <mat-datepicker-toggle matSuffix [for]="termStarts"></mat-datepicker-toggle>
                  <mat-datepicker #termStarts></mat-datepicker>
                </mat-form-field>
              </div>
              <ng-template [ngIf]="termForm.controls.termExpire.value">
                <div class="col-xs-4">
                  <mat-form-field appearance="fill">
                    <mat-label>Term Schedule Expires</mat-label>
                    <input label="Term Ends" matInput [matDatepicker]="termEnds"
                           formControlName="termExpiryDate"/>
                    <mat-datepicker-toggle matSuffix [for]="termEnds"></mat-datepicker-toggle>
                    <mat-datepicker #termEnds></mat-datepicker>
                  </mat-form-field>
                </div>
              </ng-template>
              <div class="col-xs-4">
                <mat-form-field appearance="fill">
                  <mat-label>Term Base Income</mat-label>
                  <input label="Username" matInput formControlName="termIncome"/>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-xs-4">
                <mat-checkbox #expiryNeeded formControlName="termExpire">Term Expires?</mat-checkbox>
              </div>
              <div class="col-xs-4"></div>
            </div>
          </div>
        </div>
      </div>
    </form>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="abortAdd()">Cancel</button>
  <button [attr.disabled]="!termForm.valid ? 'disabled' : null"
          [matTooltip]="!termForm.valid ? 'Term data must be valid before submitting': null" mat-button (click)="addRecord()" cdkFocusInitial>Add</button>
</div>
